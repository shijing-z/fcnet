% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_conn.R
\name{calc_conn}
\alias{calc_conn}
\title{Calculate user-defined connectivity}
\usage{
calc_conn(conn_array, indices, from, to)
}
\arguments{
\item{conn_array}{3D numeric array of connectivity values with dimensions
(ROI x ROI x subjects), as returned by \code{\link{load_matrices}}}

\item{indices}{Named list of integer vectors mapping network/ROI names to
index positions, as returned by \code{\link{get_indices}}}

\item{from}{Character. Name of the source ROI or network. Must match a
name in \code{indices}}

\item{to}{Character vector. One or more target names. Each must match a
name in \code{indices}. Connectivity is calculated from \code{from} to
each target separately}
}
\value{
A data frame with one row per subject and one column per target,
named \code{{from}_{to}}.
}
\description{
General-purpose connectivity calculator for user-defined ROI or network
connections. Computes mean connectivity between a source (\code{from}) and
one or more targets (\code{to}) using raw cell average.
}
\details{
Connectivity is computed using raw cell average: for each subject, the
function extracts \code{conn_array[from_idx, to_idx, subj]} and takes the
mean of all values. When both \code{from} and \code{to} resolve to single
ROIs, the direct connection value is returned (no averaging needed).

Supports any combination of ROIs and networks:
\itemize{
\item ROI-to-network: e.g., \code{from = "ahip", to = "default"}
\item ROI-to-ROI: e.g., \code{from = "ahip", to = "phip"}
\item Network-to-network: e.g., \code{from = "default", to = "cont"}
}

Names in \code{from} and \code{to} reference entries in \code{indices},
including any manual groupings created via \code{manual_assignments} in
\code{\link{get_indices}}.

Works with any Schaefer version (100-1000 parcels, 7 or 17 networks).
}
\examples{
# ROI-to-network
indices <- get_indices(ex_conn_array)
ahip_default <- calc_conn(ex_conn_array, indices,
                          from = "ahip", to = "default")

# ROI-to-multiple-networks
ahip_nets <- calc_conn(ex_conn_array, indices,
                       from = "ahip",
                       to = c("default", "cont", "vis"))

# ROI-to-ROI
ahip_phip <- calc_conn(ex_conn_array, indices,
                       from = "ahip", to = "phip")

\dontrun{
# Full workflow with manual grouping
z_mat <- load_matrices("data/conn.mat", type = "zmat", exclude = c(46, 57))
indices <- get_indices(z_mat,
  manual_assignments = list(ahip = "hippocampus", phip = "hippocampus"))

hip_nets <- calc_conn(z_mat, indices,
                      from = "hippocampus",
                      to = c("default", "cont", "limbic",
                             "salventattn", "dorsattn", "sommot", "vis"))
}

}
\seealso{
\code{\link{calc_within}} for within-network connectivity.
\code{\link{calc_between}} for between-network connectivity.
\code{\link{get_indices}} for generating the \code{indices} input.
}
