% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_between.R
\name{calc_between}
\alias{calc_between}
\title{Calculate between-network connectivity}
\usage{
calc_between(conn_array, indices, pairwise = FALSE)
}
\arguments{
\item{conn_array}{3D numeric array of connectivity values with dimensions
(ROI x ROI x subjects), as returned by \code{\link{load_matrices}}}

\item{indices}{Named list of integer vectors mapping network names to ROI
index positions, as returned by \code{\link{get_indices}}}

\item{pairwise}{Logical. If FALSE (default), returns per-network averages
(each network vs. all other networks). If TRUE, returns all unique
pairwise combinations between networks}
}
\value{
A data frame with one row per subject.

When \code{pairwise = FALSE}: one column per network
(named \code{between_{network}}) and a \code{between_network} column with
the overall between-network average (raw cell average across all
between-network connections).

When \code{pairwise = TRUE}: one column per unique network pair
(named \code{{net1}_{net2}}).
}
\description{
Calculate mean between-network connectivity across all subjects. Supports
two modes: per-network averages (each network vs. all others) and pairwise
combinations (all unique network pairs).
}
\details{
Entries in \code{indices} with fewer than 2 ROIs are automatically dropped
with a warning, as between-network calculations at the network level are
intended for multi-ROI networks. Use \code{\link{calc_conn}} for
single-ROI-to-network connectivity.

The overall \code{between_network} average (when \code{pairwise = FALSE})
uses raw cell average: all between-network connections are pooled and
averaged with equal weight per cell. This means larger network pairs
contribute proportionally more than smaller pairs.

Works with any Schaefer version (100-1000 parcels, 7 or 17 networks).
}
\examples{
# Per-network between-network averages
indices <- get_indices(example_conn_array, roi_include = "schaefer")
between <- calc_between(example_conn_array, indices)
head(between)

# All pairwise combinations
pairwise <- calc_between(example_conn_array, indices, pairwise = TRUE)
head(pairwise)

\dontrun{
# Full workflow
z_mat <- load_matrices("data/conn.mat", type = "zmat", exclude = c(46, 57))
indices <- get_indices(z_mat, roi_include = "schaefer")
between <- calc_between(z_mat, indices)
pairwise <- calc_between(z_mat, indices, pairwise = TRUE)
}

}
\seealso{
\code{\link{calc_within}} for within-network connectivity.
\code{\link{calc_conn}} for user-defined ROI-to-ROI or ROI-to-network
connectivity.
\code{\link{get_indices}} for generating the \code{indices} input.
}
